name: Run Prefect Flow

on: [push]

jobs:
  run-flow:
    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Run flow in Docker
      env:
        PREFECT_API_URL: ${{ secrets.PREFECT_API_URL }}
        PREFECT_API_KEY: ${{ secrets.PREFECT_API_KEY }}
      shell: pwsh
      run: |
        Get-Content your_script.py | docker run -i `
          -e PREFECT_API_URL=$env:PREFECT_API_URL `
          -e PREFECT_API_KEY=$env:PREFECT_API_KEY `
          -e PREFECT_LOGGING_LEVEL="DEBUG" `
          --rm prefecthq/prefect:3-python3.12 `
          uv run --with pandas --with prefect --python 3.13.1 -
